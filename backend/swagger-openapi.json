{
  "openapi": "3.0.0",
  "info": {
    "title": "Course Final Project - Auction API",
    "description": "Complete API documentation for the online auction platform. This API supports product bidding, user authentication, messaging, and auction management.",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "url": "http://localhost:3000"
    },
    "license": {
      "name": "AGPL-3.0"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development Server"
    }
  ],
  "tags": [
    {
      "name": "Health",
      "description": "Service health endpoints"
    },
    {
      "name": "Authentication",
      "description": "User authentication and authorization endpoints"
    },
    {
      "name": "Products",
      "description": "Product management and auction endpoints"
    },
    {
      "name": "Categories",
      "description": "Category management endpoints"
    },
    {
      "name": "Bids",
      "description": "Bidding and auto-bid endpoints"
    },
    {
      "name": "Comments",
      "description": "Product comments and feedback endpoints"
    },
    {
      "name": "Messages",
      "description": "User messaging endpoints"
    },
    {
      "name": "Watchlists",
      "description": "User watchlist endpoints"
    },
    {
      "name": "UpgradeRequests",
      "description": "Account upgrade request endpoints"
    },
    {
      "name": "Payments",
      "description": "Payment processing endpoints"
    },
    {
      "name": "Receipts",
      "description": "Product receipts endpoints"
    },
    {
      "name": "BlockedBidders",
      "description": "Blocked bidders management endpoints"
    },
    {
      "name": "Users",
      "description": "User management endpoints"
    },
    {
      "name": "Feedbacks",
      "description": "User feedback endpoints"
    }
  ],
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "Authorization",
        "description": "JWT token for authentication"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "integer",
            "description": "Unique user identifier"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "full_name": {
            "type": "string",
            "description": "Full name of the user"
          },
          "address": {
            "type": "string",
            "description": "User's address"
          },
          "dob": {
            "type": "string",
            "format": "date",
            "description": "Date of birth"
          },
          "role": {
            "type": "string",
            "enum": ["ADMIN", "SELLER", "BIDDER"],
            "description": "User role"
          },
          "is_verified": {
            "type": "boolean",
            "description": "Email verification status"
          },
          "positive_rating": {
            "type": "integer",
            "description": "Count of positive ratings"
          },
          "negative_rating": {
            "type": "integer",
            "description": "Count of negative ratings"
          }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "integer",
            "description": "Unique product identifier"
          },
          "seller_id": {
            "type": "integer",
            "description": "ID of the seller"
          },
          "category_id": {
            "type": "integer",
            "description": "Category ID"
          },
          "winner_id": {
            "type": "integer",
            "description": "ID of the auction winner (null if ongoing)"
          },
          "name": {
            "type": "string",
            "description": "Product name"
          },
          "price_start": {
            "type": "number",
            "format": "decimal",
            "description": "Starting bid price"
          },
          "price_step": {
            "type": "number",
            "format": "decimal",
            "description": "Minimum bid increment"
          },
          "price_buy_now": {
            "type": "number",
            "format": "decimal",
            "description": "Buy now price (optional)"
          },
          "price_current": {
            "type": "number",
            "format": "decimal",
            "description": "Current highest bid"
          },
          "start_date": {
            "type": "string",
            "format": "date-time",
            "description": "Auction start date"
          },
          "end_date": {
            "type": "string",
            "format": "date-time",
            "description": "Auction end date"
          },
          "is_auto_extend": {
            "type": "boolean",
            "description": "Auto-extend auction if bid placed near end"
          },
          "status": {
            "type": "string",
            "enum": ["ACTIVE", "ENDED", "SOLD"],
            "description": "Product auction status"
          }
        }
      },
      "ProductDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Product"
          },
          {
            "type": "object",
            "properties": {
              "description": {
                "type": "string",
                "description": "Detailed product description"
              },
              "images": {
                "type": "array",
                "description": "Product images",
                "items": {
                  "type": "object",
                  "properties": {
                    "image_id": {
                      "type": "integer"
                    },
                    "image_url": {
                      "type": "string"
                    },
                    "is_primary": {
                      "type": "boolean"
                    }
                  }
                }
              },
              "seller": {
                "$ref": "#/components/schemas/User"
              },
              "category": {
                "type": "object",
                "properties": {
                  "category_id": {
                    "type": "integer"
                  },
                  "name": {
                    "type": "string"
                  }
                }
              },
              "current_bids": {
                "type": "array",
                "description": "List of bids placed on this product",
                "items": {
                  "$ref": "#/components/schemas/Bid"
                }
              }
            }
          }
        ]
      },
      "Category": {
        "type": "object",
        "properties": {
          "category_id": {
            "type": "integer",
            "description": "Unique category identifier"
          },
          "name": {
            "type": "string",
            "description": "Category name"
          },
          "parent_id": {
            "type": "integer",
            "nullable": true,
            "description": "Parent category ID for subcategories"
          }
        }
      },
      "Bid": {
        "type": "object",
        "properties": {
          "bid_id": {
            "type": "integer",
            "description": "Unique bid identifier"
          },
          "product_id": {
            "type": "integer",
            "description": "Product being bid on"
          },
          "bidder_id": {
            "type": "integer",
            "description": "User placing the bid"
          },
          "amount": {
            "type": "number",
            "format": "decimal",
            "description": "Bid amount"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when bid was placed"
          }
        }
      },
      "AutoBid": {
        "type": "object",
        "properties": {
          "auto_bid_id": {
            "type": "integer",
            "description": "Unique auto-bid identifier"
          },
          "product_id": {
            "type": "integer",
            "description": "Product for auto-bidding"
          },
          "bidder_id": {
            "type": "integer",
            "description": "User with auto-bid"
          },
          "max_price": {
            "type": "number",
            "format": "decimal",
            "description": "Maximum price for auto-bidding"
          },
          "status": {
            "type": "string",
            "enum": ["ACTIVE", "INACTIVE"],
            "description": "Auto-bid status"
          }
        }
      },
      "ProductComment": {
        "type": "object",
        "properties": {
          "comment_id": {
            "type": "integer",
            "description": "Unique comment identifier"
          },
          "product_id": {
            "type": "integer",
            "description": "Product being commented on"
          },
          "user_id": {
            "type": "integer",
            "description": "User who commented"
          },
          "content": {
            "type": "string",
            "description": "Comment content"
          },
          "parent_id": {
            "type": "integer",
            "nullable": true,
            "description": "Parent comment ID for nested comments"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Comment creation timestamp"
          }
        }
      },
      "Message": {
        "type": "object",
        "properties": {
          "message_id": {
            "type": "integer",
            "description": "Unique message identifier"
          },
          "sender_id": {
            "type": "integer",
            "description": "Message sender user ID"
          },
          "receiver_id": {
            "type": "integer",
            "description": "Message receiver user ID"
          },
          "content": {
            "type": "string",
            "description": "Message content"
          },
          "is_read": {
            "type": "boolean",
            "description": "Whether message has been read"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Message creation timestamp"
          }
        }
      },
      "Feedback": {
        "type": "object",
        "properties": {
          "feedback_id": {
            "type": "integer",
            "description": "Unique feedback identifier"
          },
          "product_id": {
            "type": "integer",
            "description": "Related product ID"
          },
          "from_user_id": {
            "type": "integer",
            "description": "User giving feedback"
          },
          "to_user_id": {
            "type": "integer",
            "description": "User receiving feedback"
          },
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "description": "Rating (1-5 stars)"
          },
          "comment": {
            "type": "string",
            "description": "Feedback comment"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Feedback creation timestamp"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Error message"
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message"
          },
          "data": {
            "type": "object",
            "description": "Response data"
          }
        }
      }
    }
  },
  "paths": {
    "/": {
      "get": {
        "summary": "API Health Check",
        "operationId": "getRoot",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "Server is running"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "User Login",
        "operationId": "loginUser",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  }
                },
                "required": ["email", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "accessToken": {
                      "type": "string",
                      "description": "JWT access token for authentication"
                    },
                    "id": {
                      "type": "integer",
                      "description": "User ID"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "summary": "User Registration",
        "operationId": "signUp",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "newuser@example.com"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "example": "password123"
                  },
                  "full_name": {
                    "type": "string",
                    "minLength": 2,
                    "example": "John Doe"
                  },
                  "address": {
                    "type": "string",
                    "example": "123 Main St"
                  },
                  "dob": {
                    "type": "string",
                    "format": "date",
                    "example": "1990-01-01"
                  },
                  "recaptcha_token": {
                    "type": "string",
                    "description": "Google reCAPTCHA token"
                  }
                },
                "required": ["email", "password", "full_name", "recaptcha_token"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or user already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "summary": "User Logout",
        "operationId": "logout",
        "tags": ["Authentication"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/refresh-token": {
      "post": {
        "summary": "Refresh Access Token",
        "operationId": "refresh-token",
        "tags": ["Authentication"],
        "security": [
          { "BearerAuth": [] }
        ],
        "responses": {
          "200": {
            "description": "Access token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "accessToken": {
                      "type": "string",
                      "description": "New JWT access token"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/change-password": {
      "put": {
        "summary": "Change Password",
        "operationId": "changePassword",
        "tags": ["Authentication"],
        "security": [ { "BearerAuth": [] } ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "old_password": { "type": "string", "minLength": 8 },
                  "new_password": { "type": "string", "minLength": 8 }
                },
                "required": ["old_password", "new_password"]
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Password changed successfully" },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } },
          "500": { "description": "Server error", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/api/auth/forgot-password": {
      "post": {
        "summary": "Request Password Reset",
        "operationId": "forgotPassword",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "type": "object", "properties": { "email": { "type": "string", "format": "email" } }, "required": ["email"] }
            }
          }
        },
        "responses": { "200": { "description": "Reset instructions sent" }, "400": { "description": "Invalid input", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }, "500": { "description": "Server error", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } } }
      }
    },
    "/api/auth/reset-password": {
      "post": {
        "summary": "Reset Password",
        "operationId": "resetPassword",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "type": "object", "properties": { "otp": { "type": "string" }, "email": { "type": "string", "format": "email" }, "new_password": { "type": "string", "minLength": 8 } }, "required": ["otp", "email", "new_password"] }
            }
          }
        },
        "responses": { "200": { "description": "Password reset successfully" }, "400": { "description": "Invalid input", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }, "500": { "description": "Server error", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } } }
      }
    },
    "/api/auth/update-account": {
      "put": {
        "summary": "Update Account",
        "operationId": "updateAccount",
        "tags": ["Authentication"],
        "security": [ { "BearerAuth": [] } ],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "type": "object", "properties": { "address": { "type": "string" }, "full_name": { "type": "string" }, "email": { "type": "string", "format": "email" }, "dob": { "type": "string", "format": "date" } } } } }
        },
        "responses": { "200": { "description": "Account updated successfully" }, "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }, "500": { "description": "Server error", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } } }
      }
    },
    "/api/auth/verify-otp": {
      "post": {
        "summary": "Verify OTP",
        "operationId": "verifyOTP",
        "tags": ["Authentication"],
        "security": [ { "BearerAuth": [] } ],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "otp": { "type": "string" } }, "required": ["otp"] } } } },
        "responses": { "200": { "description": "Account verified successfully" }, "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }, "400": { "description": "Invalid OTP", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } } }
      },
      "get": {
        "summary": "Send OTP",
        "operationId": "sendOTP",
        "tags": ["Authentication"],
        "security": [ { "BearerAuth": [] } ],
        "responses": { "200": { "description": "OTP sent" }, "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } } }
      }
    },
    "/api/products/": {
      "get": {
        "summary": "Get Products",
        "operationId": "getAllProducts",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Number of products per page",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number (starts at 1)",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search query for product name",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Field to sort by (e.g., end_date, price_current)",
            "schema": {
              "type": "string",
              "default": "end_date"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "Sort order (ASC or DESC)",
            "schema": {
              "type": "string",
              "enum": ["ASC", "DESC"],
              "default": "ASC"
            }
          },
          {
            "name": "category",
            "in": "query",
            "description": "Filter by category ID",
            "schema": { "type": "integer" }
          },
          {
            "name": "seller_id",
            "in": "query",
            "description": "Filter by seller ID",
            "schema": { "type": "integer" }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Product status filter",
            "schema": {
              "type": "string",
              "enum": ["ACTIVE", "ENDED", "SOLD"],
              "default": "ACTIVE"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Active products retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Product"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No active products found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create New Product",
        "operationId": "createProduct",
        "tags": ["Products"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 5,
                    "example": "Vintage Camera"
                  },
                  "category_id": {
                    "type": "integer",
                    "example": 1
                  },
                  "price_start": {
                    "type": "number",
                    "format": "decimal",
                    "example": 10.00
                  },
                  "price_step": {
                    "type": "number",
                    "format": "decimal",
                    "example": 1.00
                  },
                  "price_buy_now": {
                    "type": "number",
                    "format": "decimal",
                    "example": 50.00
                  },
                  "start_date": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-01-01T00:00:00Z"
                  },
                  "end_date": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-02-01T00:00:00Z"
                  },
                  "is_auto_extend": {
                    "type": "boolean",
                    "example": true
                  },
                  "description": {
                    "type": "string",
                    "minLength": 10,
                    "example": "A mint condition vintage camera."
                  },
                  "allow_first_time_bidder": {
                    "type": "boolean",
                    "example": true
                  },
                  "images": {
                    "type": "array",
                    "maxItems": 4,
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "Product images (max 4)"
                  }
                },
                "required": ["name", "category_id", "price_start", "price_step", "end_date", "description", "images"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product and images created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Product"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or missing/invalid images (1-4 images required)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/admin": {
      "get": {
        "summary": "Admin: Get Products",
        "operationId": "getProductsForAdmin",
        "tags": ["Products"],
        "security": [ { "BearerAuth": [] } ],
        "parameters": [
          { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 10 } },
          { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 } },
          { "name": "search", "in": "query", "schema": { "type": "string" } },
          { "name": "sort", "in": "query", "schema": { "type": "string", "default": "end_date" } },
          { "name": "order", "in": "query", "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "ASC" } },
          { "name": "category", "in": "query", "schema": { "type": "integer" } },
          { "name": "seller_id", "in": "query", "schema": { "type": "integer" } },
          { "name": "status", "in": "query", "schema": { "type": "string", "enum": ["ACTIVE", "ENDED", "SOLD"] } }
        ],
        "responses": { "200": { "description": "Products retrieved" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } }
      }
    },
    "/api/products/{id}": {
      "get": {
        "summary": "Get Product Details",
        "operationId": "getProductDetail",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Product ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product details retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/ProductDetail"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update Product",
        "operationId": "updateProduct",
        "tags": ["Products"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Product ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 5
                  },
                  "category_id": {
                    "type": "integer"
                  },
                  "price_start": {
                    "type": "number",
                    "format": "decimal"
                  },
                  "price_step": {
                    "type": "number",
                    "format": "decimal"
                  },
                  "price_buy_now": {
                    "type": "number",
                    "format": "decimal"
                  },
                  "end_date": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "is_auto_extend": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Product"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Token missing or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Only product seller can update",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete Product",
        "operationId": "deleteProduct",
        "tags": ["Products"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Product ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Token missing or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Only product seller can delete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{id}/block": {
      "post": {
        "summary": "Block Bidder from Product",
        "operationId": "blockBidder",
        "tags": ["Products"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Product ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "example": 5,
                    "description": "ID of user to block from bidding"
                  },
                  "reason": {
                    "type": "string",
                    "example": "Non-payment history",
                    "description": "Reason for blocking"
                  }
                },
                "required": ["user_id", "reason"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User blocked from this product",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "object",
                      "description": "Blocked bidder record"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or blocking failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Token missing or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Only product seller can block bidders",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{id}/description": {
      "post": {
        "summary": "Add Product Description",
        "operationId": "addProductDescription",
        "tags": ["Products"],
        "security": [ { "BearerAuth": [] } ],
        "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "content": { "type": "string", "minLength": 10 } }, "required": ["content"] } } } },
        "responses": { "201": { "description": "Product description added" }, "400": { "description": "Invalid input" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/api/products/{id}/is-blocked": {
      "get": {
        "summary": "Check Bidder Blocked",
        "operationId": "checkBidderBlocked",
        "tags": ["Products"],
        "security": [ { "BearerAuth": [] } ],
        "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ],
        "responses": { "200": { "description": "Block status retrieved" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/api/categories/": {
      "get": {
        "summary": "Get All Categories",
        "operationId": "getAllCategories",
        "tags": ["Categories"],
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Category"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Category",
        "operationId": "createCategory",
        "tags": ["Categories"],
        "security": [ { "BearerAuth": [] } ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Electronics"
                  },
                  "parent_id": {
                    "type": "integer",
                    "nullable": true,
                    "example": null
                  }
                },
                "required": ["name"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Category"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/categories/{id}": {
      "get": {
        "summary": "Get Category by ID",
        "operationId": "getCategoryById",
        "tags": ["Categories"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Category ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Category"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Category not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update Category",
        "operationId": "updateCategory",
        "tags": ["Categories"],
        "security": [ { "BearerAuth": [] } ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Category ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Category"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete Category",
        "operationId": "deleteCategory",
        "tags": ["Categories"],
        "security": [ { "BearerAuth": [] } ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Category ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/bids/": {
      "get": {
        "summary": "Get Bids for Product",
        "operationId": "getBids",
        "tags": ["Bids"],
        "parameters": [
          {
            "name": "product_id",
            "in": "query",
            "required": true,
            "description": "Product ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Bids retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Bid"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auto-bids/": {
      "get": {
        "summary": "Get User's Auto Bids",
        "operationId": "getAutoBids",
        "tags": ["Bids"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "query",
            "description": "Filter by product ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Auto bids retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/AutoBid"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Auto Bid",
        "operationId": "createAutoBid",
        "tags": ["Bids"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "integer",
                    "example": 1
                  },
                  "max_price": {
                    "type": "number",
                    "format": "decimal",
                    "example": 100.00
                  }
                },
                "required": ["product_id", "max_price"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Auto bid created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/AutoBid"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auto-bids/{id}": {
      "put": {
        "summary": "Update Auto Bid",
        "operationId": "updateAutoBid",
        "tags": ["Bids"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Auto Bid ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "max_price": {
                    "type": "number",
                    "format": "decimal",
                    "example": 150.00
                  }
                },
                "required": ["max_price"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Auto bid updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/AutoBid"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/comments/": {
      "get": {
        "summary": "Get Product Comments",
        "operationId": "getComments",
        "tags": ["Comments"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "query",
            "required": true,
            "description": "Product ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Comments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ProductComment"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Post Product Comment",
        "operationId": "postComment",
        "tags": ["Comments"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "integer",
                    "example": 1
                  },
                  "content": {
                    "type": "string",
                    "example": "Great product!"
                  },
                  "parent_id": {
                    "type": "integer",
                    "nullable": true,
                    "example": null,
                    "description": "For nested replies"
                  }
                },
                "required": ["product_id", "content"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Comment created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/ProductComment"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/comments/{id}": {
      "delete": {
        "summary": "Delete Comment",
        "operationId": "deleteComment",
        "tags": ["Comments"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Comment ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Comment deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/messages/unread-count": {
      "get": {
        "summary": "Get Unread Message Count",
        "operationId": "getUnreadCount",
        "tags": ["Messages"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Unread count retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "unread_count": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/messages/conversation": {
      "get": {
        "summary": "Get Conversation with User",
        "operationId": "getConversation",
        "tags": ["Messages"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          { "name": "user_id", "in": "query", "required": true, "description": "Other user ID", "schema": { "type": "integer" } },
          { "name": "product_id", "in": "query", "required": true, "description": "Product ID", "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Conversation retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Message"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/messages/": {
      "post": {
        "summary": "Send Message",
        "operationId": "sendMessage",
        "tags": ["Messages"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "receiver_id": {
                    "type": "integer",
                    "example": 2
                  },
                  "product_id": {
                    "type": "integer",
                    "example": 1
                  },
                  "content": {
                    "type": "string",
                    "example": "Hello, are you interested in this product?"
                  }
                },
                "required": ["receiver_id", "product_id", "content"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Message"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/messages/{id}/read": {
      "put": {
        "summary": "Mark Message as Read",
        "operationId": "markMessageRead",
        "tags": ["Messages"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Message ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Message marked as read",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
    ,
    "/api/watchlists/": {
      "get": {
        "summary": "Get User Watchlist",
        "operationId": "getWatchlist",
        "tags": ["Watchlists"],
        "security": [ { "BearerAuth": [] } ],
        "responses": { "200": { "description": "Watchlist retrieved" }, "401": { "description": "Unauthorized" }, "500": { "description": "Server error" } }
      },
      "post": {
        "summary": "Add to Watchlist",
        "operationId": "addWatchlist",
        "tags": ["Watchlists"],
        "security": [ { "BearerAuth": [] } ],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "product_id": { "type": "integer" } }, "required": ["product_id"] } } } },
        "responses": { "201": { "description": "Added to watchlist" }, "400": { "description": "Invalid input" }, "401": { "description": "Unauthorized" }, "409": { "description": "Already in watchlist" } }
      }
    },
    "/api/watchlists/{id}": {
      "get": { "summary": "Check Product in Watchlist", "operationId": "getWatchlistItem", "tags": ["Watchlists"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "Product is in watchlist" }, "404": { "description": "Not in watchlist" } } },
      "delete": { "summary": "Remove from Watchlist", "operationId": "removeWatchlist", "tags": ["Watchlists"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "Removed from watchlist" } } }
    },
    "/api/upgrade-requests/": {
      "get": { "summary": "Admin: Get Upgrade Requests", "operationId": "getUpgradeRequests", "tags": ["UpgradeRequests"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "status", "in": "query", "schema": { "type": "string", "enum": ["PENDING", "APPROVED", "REJECTED"] } } ], "responses": { "200": { "description": "Upgrade requests retrieved" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } },
      "post": { "summary": "Submit Upgrade Request", "operationId": "createUpgradeRequest", "tags": ["UpgradeRequests"], "security": [ { "BearerAuth": [] } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "reason": { "type": "string", "minLength": 10 } }, "required": ["reason"] } } } }, "responses": { "201": { "description": "Upgrade request submitted" }, "401": { "description": "Unauthorized" }, "409": { "description": "Duplicate pending request" } } }
    },
    "/api/upgrade-requests/{id}": {
      "put": { "summary": "Admin: Update Upgrade Request Status", "operationId": "updateUpgradeRequest", "tags": ["UpgradeRequests"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "status": { "type": "string", "enum": ["APPROVED", "REJECTED"] } }, "required": ["status"] } } } }, "responses": { "200": { "description": "Request status updated" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" }, "400": { "description": "Invalid status" } } },
      "delete": { "summary": "Admin: Delete Upgrade Request", "operationId": "deleteUpgradeRequest", "tags": ["UpgradeRequests"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "Upgrade request deleted" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } }
    },
    "/api/payment/create-order": {
      "post": { "summary": "Create PayPal Order", "operationId": "createOrder", "tags": ["Payments"], "security": [ { "BearerAuth": [] } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "product_id": { "type": "integer" } }, "required": ["product_id"] } } } }, "responses": { "200": { "description": "Order created" }, "401": { "description": "Unauthorized" }, "404": { "description": "Receipt not found" }, "400": { "description": "Already paid" }, "500": { "description": "Failed to create order" } } }
    },
    "/api/payment/capture-order": {
      "post": { "summary": "Capture PayPal Order", "operationId": "captureOrder", "tags": ["Payments"], "security": [ { "BearerAuth": [] } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "orderID": { "type": "string" }, "product_id": { "type": "integer" } }, "required": ["orderID", "product_id"] } } } }, "responses": { "200": { "description": "Payment captured" }, "500": { "description": "Payment failed" } } }
    },
    "/api/receipts/": {
      "get": { "summary": "Get Receipts", "operationId": "getReceipts", "tags": ["Receipts"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "product_id", "in": "query", "schema": { "type": "integer" } }, { "name": "role", "in": "query", "schema": { "type": "string", "enum": ["BIDDER", "SELLER", "ADMIN"] } } ], "responses": { "200": { "description": "Receipts retrieved" }, "400": { "description": "Bad request" }, "404": { "description": "Not found" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } },
      "post": { "summary": "Create Receipt (Buy Now)", "operationId": "createReceipt", "tags": ["Receipts"], "security": [ { "BearerAuth": [] } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "product_id": { "type": "integer" } }, "required": ["product_id"] } } } }, "responses": { "201": { "description": "Receipt created" }, "400": { "description": "Invalid input or exists" }, "404": { "description": "Product not found" } } }
    },
    "/api/receipts/{id}": {
      "get": { "summary": "Get Receipt by ID", "operationId": "getReceiptById", "tags": ["Receipts"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "Receipt retrieved" }, "404": { "description": "Receipt not found" }, "403": { "description": "Access denied" } } },
      "put": { "summary": "Update Receipt Status", "operationId": "updateReceipt", "tags": ["Receipts"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "paid_by_buyer": { "type": "boolean" }, "confirmed_by_seller": { "type": "boolean" }, "confirmed_by_buyer": { "type": "boolean" }, "status": { "type": "string", "enum": ["PENDING", "FINISHED", "CANCELED"] }, "paypal_order": { "type": "string" } } } } } }, "responses": { "200": { "description": "Receipt updated" }, "403": { "description": "Unauthorized" } } }
    },
    "/api/blocked-bidders/": {
      "get": { "summary": "Admin: Get All Blocked Entries", "operationId": "getAllBlocked", "tags": ["BlockedBidders"], "security": [ { "BearerAuth": [] } ], "responses": { "200": { "description": "Blocked entries retrieved" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } }
    },
    "/api/blocked-bidders/bidders": {
      "get": { "summary": "Get Blocked Bidders by Current Seller", "operationId": "getBlockedBySeller", "tags": ["BlockedBidders"], "security": [ { "BearerAuth": [] } ], "responses": { "200": { "description": "Blocked bidders retrieved" }, "401": { "description": "Unauthorized" } } }
    },
    "/api/blocked-bidders/products": {
      "get": { "summary": "Get Blocked Products for Current Bidder", "operationId": "getBlockedProducts", "tags": ["BlockedBidders"], "security": [ { "BearerAuth": [] } ], "responses": { "200": { "description": "Blocked products retrieved" }, "401": { "description": "Unauthorized" } } }
    },
    "/api/blocked-bidders/unblock-bidder": {
      "post": { "summary": "Unblock Bidder for Product", "operationId": "unblockBidder", "tags": ["BlockedBidders"], "security": [ { "BearerAuth": [] } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "user_id": { "type": "integer" }, "product_id": { "type": "integer" } }, "required": ["user_id", "product_id"] } } } }, "responses": { "200": { "description": "Bidder unblocked" }, "401": { "description": "Unauthorized" }, "400": { "description": "Invalid input" } } }
    },
    "/api/users/": {
      "get": { "summary": "Admin: Get All Users", "operationId": "getUsers", "tags": ["Users"], "security": [ { "BearerAuth": [] } ], "responses": { "200": { "description": "Users retrieved" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } },
      "post": { "summary": "Admin: Create User", "operationId": "createUser", "tags": ["Users"], "security": [ { "BearerAuth": [] } ], "responses": { "201": { "description": "User created" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } }
    },
    "/api/users/account": {
      "get": { "summary": "Get Current Account", "operationId": "getAccount", "tags": ["Users"], "security": [ { "BearerAuth": [] } ], "responses": { "200": { "description": "Account retrieved" }, "401": { "description": "Unauthorized" } } }
    },
    "/api/users/{id}": {
      "get": { "summary": "Get User by ID", "operationId": "getUserById", "tags": ["Users"], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "User retrieved" }, "404": { "description": "User not found" } } },
      "put": { "summary": "Admin: Update User", "operationId": "updateUser", "tags": ["Users"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "User updated" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } },
      "delete": { "summary": "Admin: Delete User", "operationId": "deleteUser", "tags": ["Users"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "User deleted" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } }
    },
    "/api/users/{id}/reset-password": {
      "put": { "summary": "Admin: Reset User Password", "operationId": "adminResetPassword", "tags": ["Users"], "security": [ { "BearerAuth": [] } ], "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "new_password": { "type": "string", "minLength": 8 } }, "required": ["new_password"] } } } }, "responses": { "200": { "description": "Password reset" }, "401": { "description": "Unauthorized" }, "403": { "description": "Forbidden" } } }
    },
    "/api/feedbacks/": {
      "get": { "summary": "Get Feedbacks for User", "operationId": "getFeedbacks", "tags": ["Feedbacks"], "parameters": [ { "name": "user_id", "in": "query", "required": true, "schema": { "type": "integer" } } ], "responses": { "200": { "description": "Feedbacks retrieved" }, "400": { "description": "Invalid input" } } },
      "post": { "summary": "Create Feedback", "operationId": "createFeedback", "tags": ["Feedbacks"], "security": [ { "BearerAuth": [] } ], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "product_id": { "type": "integer" }, "to_user_id": { "type": "integer" }, "rating": { "type": "integer", "minimum": -1, "maximum": 1 }, "comment": { "type": "string" } }, "required": ["product_id", "to_user_id", "rating"] } } } }, "responses": { "201": { "description": "Feedback submitted" }, "403": { "description": "Forbidden" } } }
    }
  }
}
